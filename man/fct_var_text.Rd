% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/var_text.R
\name{fct_var_text}
\alias{fct_var_text}
\title{Create a Formatted Text Description of Variable Distribution}
\usage{
fct_var_text(
  arg_text_desc = "",
  arg_dataset,
  arg_fl_rest = NULL,
  arg_var_rest,
  arg_order = FALSE,
  arg_cvt_stg = I,
  arg_nbr_obs = Inf,
  arg_lbl = c("pct", "nbr", "nbr-pct")
)
}
\arguments{
\item{arg_text_desc}{Character string to prepend to the output (default: "")}

\item{arg_dataset}{Data frame containing the categorical variable to analyze}

\item{arg_fl_rest}{Optional flag filtering condition (default: NULL)}

\item{arg_var_rest}{Unquoted name of the variable to analyze}

\item{arg_order}{Logical indicating whether to sort by frequency (default: FALSE)}

\item{arg_cvt_stg}{Function to apply to labels (default: identity function)}

\item{arg_nbr_obs}{Number of levels to include (default: Inf for all)}

\item{arg_lbl}{Format for displaying counts: "nbr" (count only), "pct" (percentage only), or "nbr-pct" (both)}
}
\value{
A character string containing the formatted description
}
\description{
Creates a formatted text string describing the distribution of a categorical variable,
including counts and percentages for each level.
}
\examples{
# Basic usage - show race distribution with default formatting
fct_var_text(arg_dataset = tlr_adsl, arg_var_rest = RACE)

# Add descriptive prefix text
fct_var_text(arg_text_desc = "Patients were", arg_dataset = tlr_adsl, arg_var_rest = RACE)

# Convert labels to sentence case
fct_var_text(arg_dataset = tlr_adsl, arg_var_rest = RACE, arg_cvt_stg = stringr::str_to_sentence)

# Sort by frequency (most common first)
fct_var_text(arg_dataset = tlr_adsl, arg_var_rest = RACE, arg_order = TRUE)

# Show only counts
fct_var_text(arg_dataset = tlr_adsl, arg_var_rest = RACE, arg_lbl = "nbr")

# Show only percentages
fct_var_text(arg_dataset = tlr_adsl, arg_var_rest = RACE, arg_lbl = "pct")

# Show both counts and percentages
fct_var_text(arg_dataset = tlr_adsl, arg_var_rest = RACE, arg_lbl = "nbr-pct")

# Limit to top 3 most frequent categories
fct_var_text(arg_dataset = tlr_adsl, arg_var_rest = RACE, arg_order = TRUE, arg_nbr_obs = 3)

# Filter data before summarizing (e.g., only safety population)
fct_var_text(arg_dataset = tlr_adsl, arg_fl_rest = SAFFL == "Y", arg_var_rest = RACE)

# Complete example with multiple options
fct_var_text(
  arg_text_desc = "The most common reasons for treatment discontinuation were:",
  arg_dataset = tlr_adsl,
  arg_fl_rest = DISCONFL == "Y", 
  arg_var_rest = DCREASCD,
  arg_order = TRUE,
  arg_nbr_obs = 3,
  arg_cvt_stg = stringr::str_to_lower,
  arg_lbl = "nbr-pct"
)

}
